{% if item.tags|length > 0 or isAdmin %}
    <span>Tags: </span>
    <ul class="tagList">
        {% for tag in item.tags %}
            <li><a href="/tag/{{ tag }}">{{ tag }}</a>{% if isAdmin %}(<a href="#" class="delete-tag">x</a>){% endif %}
            </li>
        {% endfor %}
    </ul>
{% endif %}
{% if isAdmin %}
    <a href="#" class="add-tag" onclick="return setupAddTagButton('{{ item.id }}');">add</a>
    <script>
        $(document).ready(function () {
            setupDeleteTagButtons();
            //setupAddTagButton();
        });

        function deleteTag(tag) {
            tag.parent().remove();
        }

        function setupDeleteTagButtons() {
            $('a.delete-tag').click(function () {
                deleteTag($(this));
                return false;
            });
        }

        function setupAddTagButton(postId) {
            $('#tagEditorWrapper').remove();
            $.get('/tag/editor/'+postId, function (data) {
                var html = '<li id="tagEditorWrapper">' + data + '</li>';
                $('#'+postId+' .tagList').append(html);
            });
            return false;
        }
    </script>
{% endif %}